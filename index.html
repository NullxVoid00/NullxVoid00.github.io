<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abyssal Light Games</title>
    <style>
        /* All CSS remains exactly the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-black: #0a0a0a;
            --primary-white: #f0f0f0;
            --accent-red: #dc143c;
            --accent-blue: #4169e1;
            --accent-pink: #ff69b4;
            --accent-green: #32cd32;
            --accent-purple: #9370db;
            --text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--primary-black);
            color: var(--primary-white);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(
                    0deg,
                    rgba(255,255,255,0.03) 0px,
                    transparent 1px,
                    transparent 2px,
                    rgba(255,255,255,0.03) 3px
                );
            pointer-events: none;
            z-index: 1;
            animation: staticNoise 8s steps(10) infinite;
        }

        @keyframes staticNoise {
            0%, 100% { transform: translate(0, 0); }
            10% { transform: translate(-1%, -1%); }
            20% { transform: translate(1%, 1%); }
            30% { transform: translate(-1%, 1%); }
            40% { transform: translate(1%, -1%); }
            50% { transform: translate(-1%, 0); }
            60% { transform: translate(1%, 0); }
            70% { transform: translate(0, -1%); }
            80% { transform: translate(0, 1%); }
            90% { transform: translate(1%, 1%); }
        }

        @keyframes glitch {
            0%, 100% { 
                text-shadow: 2px 0 var(--accent-red), -2px 0 var(--accent-blue);
                transform: translate(0);
            }
            20% { 
                text-shadow: 2px 0 var(--accent-blue), -2px 0 var(--accent-red);
                transform: translate(-2px, 2px);
            }
            40% { 
                text-shadow: -2px 0 var(--accent-pink), 2px 0 var(--accent-green);
                transform: translate(-2px, -2px);
            }
            60% { 
                text-shadow: 2px 0 var(--accent-green), -2px 0 var(--accent-purple);
                transform: translate(2px, 2px);
            }
            80% { 
                text-shadow: -2px 0 var(--accent-purple), 2px 0 var(--accent-pink);
                transform: translate(2px, -2px);
            }
        }

        @keyframes shake {
            0% { transform: translate(0, 0); }
            25% { transform: translate(-5px, 0); }
            50% { transform: translate(5px, 0); }
            75% { transform: translate(-5px, 0); }
            100% { transform: translate(0, 0); }
        }

        .password-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(220,20,60,0.1) 0%, rgba(10,10,10,1) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .password-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .password-container {
            text-align: center;
            padding: 2rem;
            position: relative;
            z-index: 2;
        }

        .password-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
            max-width: 300px;
        }

        .password-container h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: 2rem;
            letter-spacing: 0.2em;
            animation: glitch 2s infinite;
        }

        .password-input {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            color: var(--primary-white);
            padding: 1rem 3rem 1rem 2rem;
            font-size: 1.2rem;
            text-align: center;
            border-radius: 5px;
            outline: none;
            transition: all 0.3s ease;
            letter-spacing: 0.1em;
            width: 100%;
        }

        .password-toggle {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--primary-white);
            cursor: pointer;
            padding: 5px;
            font-size: 1rem;
            opacity: 0.6;
            transition: opacity 0.3s ease;
        }

        .password-toggle:hover {
            opacity: 1;
        }

        .password-input:focus {
            border-color: var(--accent-red);
            box-shadow: 0 0 20px rgba(220,20,60,0.3);
        }

        @keyframes typing-glow {
            0% { box-shadow: 0 0 5px rgba(220,20,60,0.5); }
            50% { box-shadow: 0 0 20px rgba(220,20,60,0.8); }
            100% { box-shadow: 0 0 5px rgba(220,20,60,0.5); }
        }

        .password-input.typing {
            animation: typing-glow 0.5s ease;
        }

        .error-message {
            color: var(--accent-red);
            margin-top: 1rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .error-message.show {
            opacity: 1;
        }

        .main-hub {
            display: none;
            min-height: 100vh;
            background: radial-gradient(circle at center, rgba(220,20,60,0.05) 0%, rgba(10,10,10,1) 100%);
            position: relative;
            z-index: 2;
        }

        .main-hub.active {
            display: block;
        }

        .hub-header {
            text-align: center;
            padding: 4rem 2rem 2rem;
            position: relative;
            z-index: 2;
        }

        @keyframes floatLogo {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .hub-logo {
            max-width: 400px;
            width: 100%;
            height: auto;
            margin-bottom: 1rem;
            animation: floatLogo 3s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(220,20,60,0.5)) 
                    drop-shadow(0 0 40px rgba(220,20,60,0.3));
            position: relative;
            z-index: 2;
        }

        .hub-header p {
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 4rem auto;
            padding: 0 2rem;
            position: relative;
            z-index: 2;
        }

        .nav-section {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 2rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-section:hover {
            transform: translateY(-5px);
            border-color: var(--accent-red);
            box-shadow: 0 10px 30px rgba(220,20,60,0.3);
        }

        .nav-section h2 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: var(--accent-red);
            letter-spacing: 0.1em;
        }

        .nav-section p {
            opacity: 0.8;
            margin-bottom: 1.5rem;
        }

        .section-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(220,20,60,0.05) 0%, rgba(10,10,10,1) 100%);
            display: none;
            z-index: 1000;
            overflow: hidden;
        }

        .section-view.active {
            display: flex;
            flex-direction: column;
            animation: expandIn 0.5s ease-out;
        }

        @keyframes expandIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .section-header {
            text-align: center;
            padding: 2rem;
            position: relative;
            z-index: 2;
        }

        .section-header h2 {
            font-size: 3rem;
            color: var(--accent-red);
            margin-bottom: 1rem;
            animation: glitch 3s infinite;
        }

        .carousel-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 2rem;
            perspective: 1200px;
            min-height: 600px;
        }

        .carousel {
            display: flex;
            align-items: center;
            height: 500px;
            position: relative;
            transform-style: preserve-3d;
            width: 100%;
            max-width: 1400px;
        }

        .project-card {
            position: absolute;
            width: 300px;
            height: 450px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            transform-origin: center;
            will-change: transform, opacity;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .project-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }

        .project-card-content {
            padding: 1.5rem;
        }

        .project-card h3 {
            font-size: 1.5rem;
            color: var(--accent-red);
            margin-bottom: 1rem;
        }

        .project-card p {
            opacity: 0.8;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .progress-bar {
            margin-top: 1rem;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--accent-green);
            transition: width 0.3s ease;
        }

        .progress-bar-label {
            font-size: 0.8rem;
            margin-top: 0.5rem;
            color: var(--primary-white);
            opacity: 0.8;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            color: var(--primary-white);
            width: 40px;
            height: 40px;
            padding: 0;
            line-height: 40px;
            cursor: pointer;
            border-radius: 50%;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            z-index: 10;
            text-align: center;
        }

        .carousel-nav:hover {
            background: rgba(220,20,60,0.2);
            border-color: var(--accent-red);
        }

        .carousel-nav.prev {
            left: 2rem;
        }

        .carousel-nav.next {
            right: 2rem;
        }

        .gallery-viewport {
            position: relative;
            width: 100%;
            height: calc(100vh - 120px);
            overflow: hidden;
            cursor: move;
        }

        .gallery-canvas {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-origin: center center;
            transition: transform 0.1s ease-out;
        }

        .gallery-arrow {
            position: absolute;
            color: var(--accent-red);
            font-size: 3rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            text-shadow: 0 0 20px rgba(220,20,60,0.8);
            z-index: 10;
        }

        .gallery-arrow.active {
            opacity: 0.8;
        }

        .gallery-arrow.top {
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .gallery-arrow.bottom {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) rotate(180deg);
        }

        .gallery-arrow.left {
            left: 20px;
            top: 50%;
            transform: translateY(-50%) rotate(-90deg);
        }

        .gallery-arrow.right {
            right: 20px;
            top: 50%;
            transform: translateY(-50%) rotate(90deg);
        }

        .gallery-image {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(0.9);
        }

        .gallery-image.loaded {
            opacity: 1;
            transform: scale(1);
        }

        .gallery-image img {
            max-width: 300px;
            max-height: 300px;
            width: auto;
            height: auto;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            display: block;
        }

        .gallery-image:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .gallery-image:hover img {
            box-shadow: 0 0 30px rgba(220,20,60,0.6);
            border-color: var(--accent-red);
        }

        .gallery-image.focused {
            transform: scale(1.3);
            z-index: 100;
        }

        .gallery-image.focused img {
            box-shadow: 0 0 50px rgba(220,20,60,0.8);
            border-color: var(--accent-red);
        }

        .gallery-image-title {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            padding: 5px 15px;
            border-radius: 5px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 0.9rem;
            pointer-events: none;
        }

        .gallery-image:hover .gallery-image-title,
        .gallery-image.focused .gallery-image-title {
            opacity: 1;
        }

        .about-section {
            max-width: 800px;
            margin: 4rem auto;
            padding: 0 2rem;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .about-section.hidden {
            display: none;
        }

        .profile-header {
            margin-bottom: 2rem;
        }

        .profile-pic {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 3px solid var(--accent-red);
            margin-bottom: 2rem;
            object-fit: cover;
            filter: drop-shadow(0 0 20px rgba(220,20,60,0.3));
        }

        .bio-text p {
            margin-bottom: 1rem;
        }

        .bio-text p:last-child {
            margin-bottom: 2rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .social-link {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 5px;
            text-decoration: none;
            color: var(--primary-white);
            transition: all 0.3s ease;
        }

        .social-link:hover {
            border-color: var(--accent-red);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220,20,60,0.3);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .red-shard {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, var(--accent-red), rgba(220,20,60,0.3));
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            margin: 2rem auto;
            animation: float 3s ease-in-out infinite;
            box-shadow: 0 0 50px var(--accent-red);
            cursor: pointer;
            transition: transform 0.1s ease;
        }

        .red-shard.shake {
            animation: shake 0.3s ease;
        }

        .back-button {
            position: fixed;
            top: 2rem;
            left: 2rem;
            padding: 0.8rem 1.5rem;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            color: var(--primary-white);
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .back-button:hover {
            border-color: var(--accent-red);
            animation: glitch 0.3s;
        }

        .back-button.hidden {
            display: none;
        }

        .volume-control {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .volume-control label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .volume-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100px;
            height: 5px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            outline: none;
            transition: background 0.3s ease;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: var(--accent-red);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(220,20,60,0.5);
        }

        .volume-slider::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: var(--accent-red);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(220,20,60,0.5);
        }

        .volume-slider:hover {
            background: rgba(255,255,255,0.3);
        }

        @media (max-width: 768px) {
            body {
                overflow-x: hidden;
            }

            .section-view {
                overflow-x: hidden;
                overflow-y: hidden;
            }

            .nav-grid {
                grid-template-columns: 1fr;
                padding: 0 1rem;
            }

            .hub-logo {
                max-width: 250px;
            }

            .social-links {
                flex-direction: column;
                align-items: center;
            }

            .profile-pic {
                width: 150px;
                height: 150px;
            }

            .volume-control {
                bottom: 0.5rem;
                right: 0.5rem;
            }

            .volume-slider {
                width: 80px;
            }

            .carousel-container {
                perspective: none;
                padding: 1rem;
                min-height: 500px;
            }

            .carousel {
                height: 420px;
                transform-style: flat;
            }

            .project-card {
                width: 280px;
                height: 380px;
            }

            .project-card img {
                height: 180px;
            }

            .carousel-nav {
                width: 40px;
                height: 40px;
                padding: 0;
                line-height: 40px;
                font-size: 1.2rem;
            }

            .carousel-nav.prev {
                left: 0.5rem;
            }

            .carousel-nav.next {
                right: 0.5rem;
            }

            .section-header {
                padding: 1.5rem 1rem;
            }

            .section-header h2 {
                font-size: 2rem;
            }

            .gallery-image img {
                max-width: 200px;
                max-height: 200px;
            }

            .gallery-arrow {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="password-screen" id="passwordScreen">
        <div class="password-container">
            <h1>ENTER THE ABYSS</h1>
            <div class="red-shard" id="redShard" onclick="checkPasswordViaShard()"></div>
            <div class="password-wrapper">
                <input type="password" 
                       class="password-input" 
                       id="passwordInput" 
                       placeholder="Enter Password"
                       autocomplete="off">
                <button class="password-toggle" id="passwordToggle" onclick="togglePassword()"></button>
            </div>
            <div class="error-message" id="errorMessage">Access Denied</div>
        </div>
    </div>

    <div class="main-hub" id="mainHub">
        <button class="back-button hidden" id="backButton" onclick="showHub()">← BACK TO HUB</button>
        
        <div id="hubHome">
            <div class="hub-header">
                <img src="Art Folder/logo0.png" alt="Abyssal Light Logo" class="hub-logo">
                <p>Games & Digital Experiences</p>
            </div>

            <div class="nav-grid">
                <div class="nav-section" onclick="showSection('games')">
                    <h2>GAMES</h2>
                    <p>Interactive experiences exploring the human psyche</p>
                </div>
                <div class="nav-section" onclick="showSection('vrchat')">
                    <h2>VRCHAT WORLDS</h2>
                    <p>Immersive virtual reality environments</p>
                </div>
                <div class="nav-section" onclick="showSection('gallery')">
                    <h2>ART GALLERY</h2>
                    <p>Visual explorations and concept work</p>
                </div>
                <div class="nav-section" onclick="window.location.href='Abyl-RPG.html'">
                    <h2>ABYL RPG SYSTEM</h2>
                    <p>Turn-based RPG framework for VRChat</p>
                </div>
                <div class="nav-section" onclick="showSection('other')">
                    <h2>OTHER PROJECTS</h2>
                    <p>Additional creative endeavors and experiments</p>
                </div>
                <div class="nav-section" onclick="showAbout()">
                    <h2>ABOUT</h2>
                    <p>Learn more about the creator</p>
                </div>
            </div>
        </div>

        <div class="about-section hidden" id="aboutSection">
            <div class="profile-header">
                <img src="Art Folder/profile-pic.jpg" alt="Profile" class="profile-pic">
                <h2 style="font-size: 2.5rem; margin-bottom: 1rem;">NULLXVOID</h2>
            </div>

            <div class="bio-text">
                <p>
                    I'm NullxVoid — or just "Null" — And I'm an amateur game designer and VRChat world and avatar creator. I specialize in crafting emotionally driven, psychologically rich experiences that blend surrealism with interactive storytelling.
                </p>
                <p>
                    My work often explores identity, perception, and the uncanny, using genre fusion as a tool to challenge expectations. As a creator, I aspire to build immersive spaces that resonate deeply, provoke thought, and leave a lasting impression beyond the screen.
                </p>
            </div>

            <div class="social-links">
                <a href="https://x.com/Skell20XX" class="social-link">Twitter</a>
                <a href="https://discord.gg/tAkXbESacu" class="social-link">Discord</a>
                <a href="https://www.youtube.com/@null7198" class="social-link">YouTube</a>
                <a href="https://github.com/NullxVoid00" class="social-link">GitHub</a>
            </div>
        </div>
    </div>

    <div class="section-view" id="gamesSection">
        <div class="section-header">
            <h2>GAMES</h2>
            <p>Interactive experiences exploring the human psyche</p>
        </div>
        <div class="carousel-container">
            <button class="carousel-nav prev" onclick="moveCarousel('games', -1)">‹</button>
            <div class="carousel" id="gamesCarousel"></div>
            <button class="carousel-nav next" onclick="moveCarousel('games', 1)">›</button>
        </div>
        <button class="back-button" onclick="closeSection()">← BACK TO HUB</button>
    </div>

    <div class="section-view" id="vrchatSection">
        <div class="section-header">
            <h2>VRCHAT WORLDS</h2>
            <p>Immersive virtual reality environments</p>
        </div>
        <div class="carousel-container">
            <button class="carousel-nav prev" onclick="moveCarousel('vrchat', -1)">‹</button>
            <div class="carousel" id="vrchatCarousel"></div>
            <button class="carousel-nav next" onclick="moveCarousel('vrchat', 1)">›</button>
        </div>
        <button class="back-button" onclick="closeSection()">← BACK TO HUB</button>
    </div>

    <div class="section-view" id="gallerySection">
        <div class="section-header">
            <h2>ART GALLERY</h2>
            <p>Visual explorations and concept work</p>
        </div>
        <div class="gallery-viewport" id="galleryViewport">
            <div class="gallery-canvas" id="galleryCanvas"></div>
            <div class="gallery-arrow top" id="arrowTop">▲</div>
            <div class="gallery-arrow bottom" id="arrowBottom">▲</div>
            <div class="gallery-arrow left" id="arrowLeft">▲</div>
            <div class="gallery-arrow right" id="arrowRight">▲</div>
        </div>
        <button class="back-button" onclick="closeSection()">← BACK TO HUB</button>
    </div>

    <div class="section-view" id="otherSection">
        <div class="section-header">
            <h2>OTHER PROJECTS</h2>
            <p>Additional creative endeavors and experiments</p>
        </div>
        <div class="carousel-container">
            <button class="carousel-nav prev" onclick="moveCarousel('other', -1)">‹</button>
            <div class="carousel" id="otherCarousel"></div>
            <button class="carousel-nav next" onclick="moveCarousel('other', 1)">›</button>
        </div>
        <button class="back-button" onclick="closeSection()">← BACK TO HUB</button>
    </div>

    <audio id="passwordAudio" loop>
        <source src="audio/password-bg.mp3" type="audio/mpeg">
    </audio>
    <audio id="hubAudio" loop>
        <source src="audio/hub-bg.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickAudio">
        <source src="audio/Click.mp3" type="audio/mpeg">
    </audio>

    <div class="volume-control">
        <label for="volumeSlider">Volume</label>
        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="1" step="0.01" value="0.5">
    </div>

    <script>
        // Audio functionality
        const passwordAudio = document.getElementById('passwordAudio');
        const hubAudio = document.getElementById('hubAudio');
        const clickAudio = document.getElementById('clickAudio');
        const volumeSlider = document.getElementById('volumeSlider');

        passwordAudio.volume = volumeSlider.value;
        hubAudio.volume = volumeSlider.value;
        clickAudio.volume = volumeSlider.value;

        volumeSlider.addEventListener('input', function() {
            passwordAudio.volume = this.value;
            hubAudio.volume = this.value;
            clickAudio.volume = this.value;
        });

        function playClickSound() {
            clickAudio.currentTime = 0;
            clickAudio.play().catch(e => console.log('Click sound error:', e));
        }

        document.addEventListener('click', function(e) {
            if (e.target.matches('.nav-section, .project-card, .gallery-image, button, .social-link, .carousel-nav')) {
                playClickSound();
            }
        });

        const passwordInput = document.getElementById('passwordInput');
        const passwordScreen = document.getElementById('passwordScreen');
        const mainHub = document.getElementById('mainHub');
        const errorMessage = document.getElementById('errorMessage');
        const redShard = document.getElementById('redShard');

        function togglePassword() {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            document.getElementById('passwordToggle').textContent = type === 'password' ? '' : '';
        }

        passwordInput.addEventListener('input', function() {
            this.classList.add('typing');
            setTimeout(() => this.classList.remove('typing'), 500);
        });

        passwordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        function checkPassword() {
            if (passwordInput.value === 'Neurorine') {
                passwordScreen.classList.add('hidden');
                let fadeOut = setInterval(() => {
                    if (passwordAudio.volume > 0.01) {
                        passwordAudio.volume -= 0.01;
                    } else {
                        passwordAudio.pause();
                        clearInterval(fadeOut);
                    }
                }, 50);
                setTimeout(() => {
                    passwordScreen.style.display = 'none';
                    mainHub.classList.add('active');
                    hubAudio.volume = 0;
                    hubAudio.play();
                    let fadeIn = setInterval(() => {
                        if (hubAudio.volume < volumeSlider.value) {
                            hubAudio.volume = Math.min(hubAudio.volume + 0.01, volumeSlider.value);
                        } else {
                            clearInterval(fadeIn);
                        }
                    }, 50);
                }, 500);
            } else {
                errorMessage.classList.add('show');
                passwordInput.value = '';
                setTimeout(() => errorMessage.classList.remove('show'), 2000);
            }
        }

        function checkPasswordViaShard() {
            redShard.classList.add('shake');
            setTimeout(() => redShard.classList.remove('shake'), 300);
            checkPassword();
        }

        const projectData = {
            games: [
                {
                    title: "Caine & Cin",
                    description: "Indie RPG: A Boy Turned Demon and a Fallen Angel descend into The Afterlife to defeat the God who cursed their fates.",
                    image: "Art Folder/GameProject2.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Ego/Dive",
                    description: "Indie RPG: Fragments of a Comatose Person's Personality band together to fix their host's mind and Awaken them while traversing a subconscious world known as Absentia.",
                    image: "Art Folder/GameProject1.jpg",
                    link: "ego-dive.html",
                    progress: "Concept"
                },
                {
                    title: "Axiom of Infinity",
                    description: "JRPG-Fighting Game: Dimension Hoppers stop a reality-threatening Calamity.",
                    image: "Art Folder/GameProject4.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Phantom Echoes",
                    description: "Horror Platformer: A Red Fox navigates a Nightmare Dreamscape for peace.",
                    image: "Art Folder/GameProject5.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Milo's Quest",
                    description: "Platformer: A boy escapes a monster while on the way to give a gift to his mother.",
                    image: "Art Folder/GameProject6.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Enclave 447",
                    description: "Adventure Game: Friends reunite in a strange town after a tragedy occurs, uniting them again to watch a meteorological event.",
                    image: "Art Folder/GameProject7.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Go! Ko! Go! Kart Racer DX",
                    description: "Kart Racing Visual Novel Murder Mystery Horror Game: Demon girl racer Ko competes in the 'GO! GO! Grand Prix', but contestants keep disappearing during races. As bodies surface, Ko must balance racing while investigating the twisted killer potentially targeting her next.",
                    image: "Art Folder/GameProject3.jpg",
                    link: "GO-KO-GO.html",
                    progress: "Concept"
                }
            ],
            vrchat: [
                {
                    title: "Dear Mario",
                    description: "Mario-themed VRChat Horror: Find Bleached Stars in a warped castle.",
                    image: "Art Folder/VRCProject5.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Escape Unit",
                    description: "Asymmetric VRChat Horror: Navigate haunted sites against unique monsters.",
                    image: "Art Folder/VRCProject6.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Tales of VRtallis",
                    description: "VR JRPG: Warriors host gods to fight corruption in turn-based combat.",
                    image: "Art Folder/VRCProject7.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Maverick Force X",
                    description: "Mega Man X-style VRChat: Battle viral androids and bosses.",
                    image: "Art Folder/VRCProject8.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "The AIEOS Phenomenon",
                    description: "VR Horror RPG: Survivors hunt a signal in a dystopian world.",
                    image: "Art Folder/VRCProject9.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Tsukiō Koromashi (Moon King: Roll it Up!)",
                    description: "VR Katamari Game: Roll clutter to create planets for the Moon King.",
                    image: "Art Folder/VRCProject10.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "End with You",
                    description: "VRChat Experience: Players have 30 minutes before an apocalypse to interact with NPCs in a doomed town, completing final requests or offering comfort, with a journal tracking routines across restarts.",
                    image: "Art Folder/VRCProject1.jpg",
                    link: "end-with-you.html",
                    progress: { status: "Unfinished", percentage: 5 }
                },
                {
                    title: "EGO/TRIP",
                    description: "The Prelude - Journey deep within the Furthest Reaches of the mind's labyrinth.",
                    image: "Art Folder/VRCProject0.jpg",
                    link: "ego-trip.html",
                    progress: { status: "Unfinished", percentage: 10 }
                },
                {
                    title: "Club Flipside",
                    description: "Zero Gravity Experience - Dance in a club where physics are just a suggestion.",
                    image: "Art Folder/VRCProject2.jpg",
                    link: "Club-Flipside.html",
                    progress: "Completed"
                },
                {
                    title: "Super Mario 64 Warfare",
                    description: "Chaos in the Mushroom Kingdom - When worlds collide in unexpected ways.",
                    image: "Art Folder/VRCProject3.jpg",
                    link: "SM64W.html",
                    progress: { status: "Unfinished", percentage: 40 }
                },
                {
                    title: "Sonic Adventure VR",
                    description: "A VRChat remake of the classic Sonic Adventure with rebuilt physics and multiplayer features.",
                    image: "Art Folder/SAMCover.png",
                    link: "SAVR.html",
                    progress: { status: "Unfinished", percentage: 20 }
                },
                {
                    title: "Coming Soon",
                    description: "New worlds are being crafted in the depths of the abyss...",
                    image: "Art Folder/VRCProject11.jpg",
                    link: "#",
                    progress: "Concept"
                }
            ],
            other: [
                {
                    title: "Red Threads",
                    description: "Book/Audio Play: A Detective tracks a Serial Killer stitching bodies.",
                    image: "Art Folder/OtherProject2.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Oracle's Burden",
                    description: "Book: A Therapist is haunted by a patient's suicide.",
                    image: "Art Folder/OtherProject3.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "M.E.G Notes 0017| Maggie",
                    description: "Backrooms Story: A girl bonds with a Party-Pooper to survive.",
                    image: "Art Folder/OtherProject4.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Think Tank",
                    description: "Book Idea: Soldiers and a hand survive a Vietnam War tank trap.",
                    image: "Art Folder/OtherProject5.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "The Place Unknown",
                    description: "Short Story: Immortals face an abyss, one paralyzed by fear.",
                    image: "Art Folder/OtherProject6.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "VStalkR16",
                    description: "Analogue VR Horror Series: A Cryptic entity enlists players to investigate the hacker behind a traumatic hacking incident that killed thousands, rebuilding a decaying virtual world for a deadly hunt.",
                    image: "Art Folder/OtherProject1.jpg",
                    link: "VS16.html",
                    progress: "Concept"
                },
                {
                    title: "Apex",
                    description: "Action Horror Film: An assassin battles a supernatural killer.",
                    image: "Art Folder/OtherProject7.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Let's Hate Each Other",
                    description: "Dark Comedy Horror: Two girls escalate a hatred contest.",
                    image: "Art Folder/OtherProject8.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Reincarnate The Apex",
                    description: "Isekai Concept: A fish reincarnates as a monster bonding with a mage.",
                    image: "Art Folder/OtherProject9.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "Charlotte & Ben",
                    description: "Romance War Story: A man and woman long for reunion during war.",
                    image: "Art Folder/OtherProject10.jpg",
                    link: "#",
                    progress: "Concept"
                },
                {
                    title: "LimeLight",
                    description: "Crime Thriller: A lawyer is blackmailed into a murder case.",
                    image: "Art Folder/OtherProject11.jpg",
                    link: "#",
                    progress: "Concept"
                }
            ]
        };

        let carouselStates = {
            games: { currentIndex: 0 },
            vrchat: { currentIndex: 0 },
            other: { currentIndex: 0 }
        };

        let touchStartX = 0;
        let touchEndX = 0;

        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
        }

        function handleTouchEnd(e, type) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe(type);
        }

        function handleSwipe(type) {
            if (touchEndX < touchStartX - 50) {
                moveCarousel(type, 1);
            }
            if (touchEndX > touchStartX + 50) {
                moveCarousel(type, -1);
            }
        }

        function initializeCarousels() {
            initializeCarousel('games', projectData.games);
            initializeCarousel('vrchat', projectData.vrchat);
            initializeCarousel('other', projectData.other);
            
            ['games', 'vrchat', 'other'].forEach(type => {
                const carousel = document.getElementById(`${type}Carousel`);
                if (carousel) {
                    carousel.addEventListener('touchstart', handleTouchStart, { passive: true });
                    carousel.addEventListener('touchend', (e) => handleTouchEnd(e, type), { passive: true });
                }
            });
        }

        function initializeCarousel(type, data) {
            const carousel = document.getElementById(`${type}Carousel`);
            carousel.innerHTML = '';
            
            carousel.style.position = 'relative';
            carousel.style.width = '100%';
            carousel.style.height = '100%';
            
            data.forEach((project, index) => {
                const card = document.createElement('div');
                card.className = 'project-card';
                
                card.style.left = '50%';
                card.style.top = '50%';
                card.style.marginLeft = '-150px';
                card.style.marginTop = '-225px';
                
                let progressHTML = '';
                if (project.progress === "Completed") {
                    progressHTML = `
                        <div class="progress-bar">
                            <div class="progress-bar-fill" style="width: 100%;"></div>
                        </div>
                        <div class="progress-bar-label">Progress: Completed</div>
                    `;
                } else if (project.progress === "Concept") {
                    progressHTML = `
                        <div class="progress-bar">
                            <div class="progress-bar-fill" style="width: 0%;"></div>
                        </div>
                        <div class="progress-bar-label">Progress: Concept</div>
                    `;
                } else if (project.progress.status === "Unfinished") {
                    progressHTML = `
                        <div class="progress-bar">
                            <div class="progress-bar-fill" style="width: ${project.progress.percentage}%;"></div>
                        </div>
                        <div class="progress-bar-label">Progress: Unfinished (${project.progress.percentage}%)</div>
                    `;
                }

                card.innerHTML = `
                    <img src="${project.image}" alt="${project.title}" onerror="this.src='Art Folder/placeholder.jpg'">
                    <div class="project-card-content">
                        <h3>${project.title}</h3>
                        <p>${project.description}</p>
                        ${progressHTML}
                    </div>
                `;
                
                if (project.link && project.link !== '#') {
                    card.onclick = () => window.location.href = project.link;
                }
                
                carousel.appendChild(card);
            });
            
            updateCarouselPositions(type);
        }

        function updateCarouselPositions(type) {
            const carousel = document.getElementById(`${type}Carousel`);
            const cards = carousel.querySelectorAll('.project-card');
            const { currentIndex } = carouselStates[type];
            const isMobile = window.innerWidth <= 768;
            
            cards.forEach((card, index) => {
                const offset = index - currentIndex;
                const absOffset = Math.abs(offset);
                const sign = offset < 0 ? -1 : 1;
                
                if (isMobile) {
                    const cardWidth = 280;
                    const translateX = offset * (cardWidth + 20);
                    const scale = absOffset === 0 ? 1 : 0.85;
                    const opacity = absOffset === 0 ? 1 : 0.3;
                    
                    card.style.marginLeft = `-${cardWidth / 2}px`;
                    card.style.marginTop = '-190px';
                    
                    card.style.transform = `translateX(${translateX}px) scale(${scale})`;
                    card.style.opacity = opacity;
                    card.style.zIndex = absOffset === 0 ? 10 : 1;
                    card.style.transition = 'all 0.4s ease-out';
                } else {
                    const spacing = 320;
                    const translateX = offset * spacing;
                    const translateZ = -absOffset * 100;
                    const rotateY = sign * Math.min(absOffset * 15, 45);
                    const scale = 1 - Math.min(absOffset * 0.2, 0.6);
                    const opacity = 1 - Math.min(absOffset * 0.3, 0.7);
                    
                    card.style.transform = `
                        translateX(${translateX}px) 
                        translateZ(${translateZ}px) 
                        rotateY(${rotateY}deg) 
                        scale(${scale})
                    `;
                    card.style.opacity = opacity;
                    card.style.zIndex = 10 - absOffset;
                    card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                }
                
                card.style.pointerEvents = absOffset === 0 ? 'auto' : 'none';
            });
        }

        function moveCarousel(type, direction) {
            const data = projectData[type];
            const state = carouselStates[type];
            
            state.currentIndex = Math.max(0, Math.min(data.length - 1, state.currentIndex + direction));
            updateCarouselPositions(type);
        }

        // Gallery Mind Map functionality
        const galleryState = {
            images: [],
            loadedImages: new Map(),
            canvasOffset: { x: 0, y: 0 },
            velocity: { x: 0, y: 0 },
            mousePos: { x: 0.5, y: 0.5 },
            worldSize: { width: 10000, height: 10000 },
            focusedImage: null,
            animationId: null,
            isGalleryActive: false
        };

        const galleryImages = Array.from({ length: 120 }, (_, i) => `GalleryProject${i + 1}.jpg`);

        function initializeGallery() {
            const viewport = document.getElementById('galleryViewport');
            const canvas = document.getElementById('galleryCanvas');
            
            if (!viewport || !canvas || galleryState.images.length > 0) return;
            
            const minSpacing = 350;
            const maxAttempts = 100;
            const imageSize = 300;
            
            // Ensure at least 2 images in viewport by adjusting spawn density
            const viewportRect = viewport.getBoundingClientRect();
            const imagesPerViewport = 2; // Minimum number of images
            const viewportArea = viewportRect.width * viewportRect.height;
            const imageArea = imageSize * imageSize;
            const totalImages = Math.max(galleryImages.length, Math.ceil((viewportArea / imageArea) * imagesPerViewport));
            
            // Generate additional image positions if needed
            const imagesToUse = galleryImages.slice(0, totalImages);
            if (totalImages > galleryImages.length) {
                for (let i = galleryImages.length; i < totalImages; i++) {
                    imagesToUse.push(galleryImages[i % galleryImages.length]);
                }
            }
            
            imagesToUse.forEach((image, index) => {
                let position;
                let attempts = 0;
                
                do {
                    position = {
                        x: Math.random() * (galleryState.worldSize.width - imageSize),
                        y: Math.random() * (galleryState.worldSize.height - imageSize),
                        image: image,
                        id: `gallery-img-${index}`,
                        velocityX: 0,
                        velocityY: 0
                    };
                    attempts++;
                } while (isOverlapping(position, galleryState.images, minSpacing) && attempts < maxAttempts);
                
                galleryState.images.push(position);
            });
            
            viewport.addEventListener('mousemove', handleGalleryMouseMove);
            viewport.addEventListener('mouseleave', handleGalleryMouseLeave);
            
            galleryState.canvasOffset.x = -galleryState.worldSize.width / 2 + viewportRect.width / 2;
            galleryState.canvasOffset.y = -galleryState.worldSize.height / 2 + viewportRect.height / 2;
            
            loadAllVisibleImages();
        }

        function isOverlapping(newPos, existingImages, minSpacing) {
            return existingImages.some(img => {
                const dx = newPos.x - img.x;
                const dy = newPos.y - img.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                return distance < minSpacing;
            });
        }

        function handleGalleryMouseMove(e) {
            const viewport = e.currentTarget;
            const rect = viewport.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            galleryState.mousePos.x = x / rect.width;
            galleryState.mousePos.y = y / rect.height;
        }

        function handleGalleryMouseLeave() {
            galleryState.mousePos.x = 0.5;
            galleryState.mousePos.y = 0.5;
        }

        function updateGalleryView() {
            if (!galleryState.isGalleryActive) {
                return;
            }
            
            const canvas = document.getElementById('galleryCanvas');
            if (!canvas) return;
            
            const maxSpeed = 15;
            const deadZone = 0.2;
            
            const distX = galleryState.mousePos.x - 0.5;
            const distY = galleryState.mousePos.y - 0.5;
            
            const effectiveDistX = Math.abs(distX) < deadZone ? 0 : distX - (deadZone * Math.sign(distX));
            const effectiveDistY = Math.abs(distY) < deadZone ? 0 : distY - (deadZone * Math.sign(distY));
            
            const targetVelX = effectiveDistX * maxSpeed * 2;
            const targetVelY = effectiveDistY * maxSpeed * 2;
            
            const smoothing = 0.1;
            galleryState.velocity.x += (targetVelX - galleryState.velocity.x) * smoothing;
            galleryState.velocity.y += (targetVelY - galleryState.velocity.y) * smoothing;
            
            galleryState.canvasOffset.x -= galleryState.velocity.x;
            galleryState.canvasOffset.y -= galleryState.velocity.y;
            
            const arrowThreshold = 1;
            document.getElementById('arrowLeft').classList.toggle('active', galleryState.velocity.x < -arrowThreshold);
            document.getElementById('arrowRight').classList.toggle('active', galleryState.velocity.x > arrowThreshold);
            document.getElementById('arrowTop').classList.toggle('active', galleryState.velocity.y < -arrowThreshold);
            document.getElementById('arrowBottom').classList.toggle('active', galleryState.velocity.y > arrowThreshold);
            
            const repulsionStrength = 0.5;
            const repulsionDistance = 350;
            const damping = 0.9;
            
            galleryState.images.forEach((img1, i) => {
                let forceX = 0;
                let forceY = 0;
                
                galleryState.images.forEach((img2, j) => {
                    if (i !== j) {
                        const dx = img1.x - img2.x;
                        const dy = img1.y - img2.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < repulsionDistance && distance > 0) {
                            const force = (repulsionDistance - distance) * repulsionStrength / distance;
                            forceX += dx * force;
                            forceY += dy * force;
                        }
                    }
                });
                
                img1.velocityX = (img1.velocityX + forceX) * damping;
                img1.velocityY = (img1.velocityY + forceY) * damping;
                
                img1.x += img1.velocityX;
                img1.y += img1.velocityY;
                
                img1.x = Math.max(0, Math.min(img1.x, galleryState.worldSize.width));
                img1.y = Math.max(0, Math.min(img1.y, galleryState.worldSize.height));
                
                const imgElement = galleryState.loadedImages.get(img1.id);
                if (imgElement) {
                    imgElement.style.left = img1.x + 'px';
                    imgElement.style.top = img1.y + 'px';
                }
            });
            
            const wrapBuffer = 1000;
            if (galleryState.canvasOffset.x > wrapBuffer) {
                galleryState.canvasOffset.x -= galleryState.worldSize.width;
                repositionImages();
            } else if (galleryState.canvasOffset.x < -galleryState.worldSize.width - wrapBuffer) {
                galleryState.canvasOffset.x += galleryState.worldSize.width;
                repositionImages();
            }
            
            if (galleryState.canvasOffset.y > wrapBuffer) {
                galleryState.canvasOffset.y -= galleryState.worldSize.height;
                repositionImages();
            } else if (galleryState.canvasOffset.y < -galleryState.worldSize.height - wrapBuffer) {
                galleryState.canvasOffset.y += galleryState.worldSize.height;
                repositionImages();
            }
            
            canvas.style.transform = `translate(${galleryState.canvasOffset.x}px, ${galleryState.canvasOffset.y}px)`;
            
            updateVisibleImages();
            
            galleryState.animationId = requestAnimationFrame(updateGalleryView);
        }

        function updateVisibleImages() {
            const viewport = document.getElementById('galleryViewport');
            if (!viewport) return;
            
            const viewportRect = viewport.getBoundingClientRect();
            const buffer = 400;
            const minVisibleImages = 2;
            
            // Count currently visible images
            let visibleCount = 0;
            const visibleImages = [];
            
            galleryState.images.forEach(imgData => {
                const worldX = imgData.x + galleryState.canvasOffset.x;
                const worldY = imgData.y + galleryState.canvasOffset.y;
                
                const isVisible = (
                    worldX > -buffer && 
                    worldX < viewportRect.width + buffer &&
                    worldY > -buffer && 
                    worldY < viewportRect.height + buffer
                );
                
                if (isVisible) {
                    visibleCount++;
                    visibleImages.push(imgData);
                }
                
                // Load image if visible and not loaded
                if (isVisible && !galleryState.loadedImages.has(imgData.id)) {
                    const imgElement = createGalleryImage(imgData);
                    document.getElementById('galleryCanvas').appendChild(imgElement);
                    galleryState.loadedImages.set(imgData.id, imgElement);
                } else if (!isVisible && galleryState.loadedImages.has(imgData.id)) {
                    const farBuffer = 800;
                    if (worldX < -farBuffer || worldX > viewportRect.width + farBuffer ||
                        worldY < -farBuffer || worldY > viewportRect.height + farBuffer) {
                        const imgElement = galleryState.loadedImages.get(imgData.id);
                        imgElement.remove();
                        galleryState.loadedImages.delete(imgData.id);
                    }
                }
            });
            
            // If fewer than 2 images are visible, spawn additional ones
            if (visibleCount < minVisibleImages) {
                const imagesToAdd = minVisibleImages - visibleCount;
                const imageSize = 300;
                const minSpacing = 350;
                const maxAttempts = 50;
                
                for (let i = 0; i < imagesToAdd; i++) {
                    let position;
                    let attempts = 0;
                    
                    // Try to place new image within viewport
                    do {
                        const viewportX = Math.random() * viewportRect.width;
                        const viewportY = Math.random() * viewportRect.height;
                        position = {
                            x: viewportX - galleryState.canvasOffset.x,
                            y: viewportY - galleryState.canvasOffset.y,
                            image: galleryImages[Math.floor(Math.random() * galleryImages.length)],
                            id: `gallery-img-${galleryState.images.length + i}`,
                            velocityX: 0,
                            velocityY: 0
                        };
                        attempts++;
                    } while (isOverlapping(position, galleryState.images, minSpacing) && attempts < maxAttempts);
                    
                    if (attempts < maxAttempts) {
                        galleryState.images.push(position);
                        const imgElement = createGalleryImage(position);
                        document.getElementById('galleryCanvas').appendChild(imgElement);
                        galleryState.loadedImages.set(position.id, imgElement);
                    }
                }
            }
        }

        function loadAllVisibleImages() {
            const viewport = document.getElementById('galleryViewport');
            if (!viewport) return;
            
            const viewportRect = viewport.getBoundingClientRect();
            const buffer = 400;
            const minVisibleImages = 2;
            
            // Load initially visible images
            let visibleCount = 0;
            const visibleImages = [];
            
            galleryState.images.forEach(imgData => {
                const worldX = imgData.x + galleryState.canvasOffset.x;
                const worldY = imgData.y + galleryState.canvasOffset.y;
                
                const isVisible = (
                    worldX > -buffer && 
                    worldX < viewportRect.width + buffer &&
                    worldY > -buffer && 
                    worldY < viewportRect.height + buffer
                );
                
                if (isVisible) {
                    visibleCount++;
                    visibleImages.push(imgData);
                    if (!galleryState.loadedImages.has(imgData.id)) {
                        const imgElement = createGalleryImage(imgData);
                        document.getElementById('galleryCanvas').appendChild(imgElement);
                        galleryState.loadedImages.set(imgData.id, imgElement);
                    }
                }
            });
            
            // Ensure at least 2 images are loaded
            if (visibleCount < minVisibleImages) {
                const imagesToAdd = minVisibleImages - visibleCount;
                const imageSize = 300;
                const minSpacing = 350;
                const maxAttempts = 50;
                
                for (let i = 0; i < imagesToAdd; i++) {
                    let position;
                    let attempts = 0;
                    
                    do {
                        const viewportX = Math.random() * viewportRect.width;
                        const viewportY = Math.random() * viewportRect.height;
                        position = {
                            x: viewportX - galleryState.canvasOffset.x,
                            y: viewportY - galleryState.canvasOffset.y,
                            image: galleryImages[Math.floor(Math.random() * galleryImages.length)],
                            id: `gallery-img-${galleryState.images.length + i}`,
                            velocityX: 0,
                            velocityY: 0
                        };
                        attempts++;
                    } while (isOverlapping(position, galleryState.images, minSpacing) && attempts < maxAttempts);
                    
                    if (attempts < maxAttempts) {
                        galleryState.images.push(position);
                        const imgElement = createGalleryImage(position);
                        document.getElementById('galleryCanvas').appendChild(imgElement);
                        galleryState.loadedImages.set(position.id, imgElement);
                    }
                }
            }
        }

        function repositionImages() {
            galleryState.loadedImages.forEach((imgElement, id) => {
                const imgData = galleryState.images.find(img => img.id === id);
                if (imgData) {
                    imgElement.style.left = imgData.x + 'px';
                    imgElement.style.top = imgData.y + 'px';
                }
            });
        }

        function createGalleryImage(imgData) {
            const container = document.createElement('div');
            container.className = 'gallery-image';
            container.style.left = imgData.x + 'px';
            container.style.top = imgData.y + 'px';
            container.id = imgData.id;
            
            const img = document.createElement('img');
            img.src = `Art Gallery/${imgData.image}`;
            img.alt = imgData.image.replace(/\.(jpg|png|gif|jpeg)$/i, '');
            img.onerror = function() { this.src = 'Art Folder/placeholder.jpg'; };
            
            const title = document.createElement('div');
            title.className = 'gallery-image-title';
            title.textContent = `"${img.alt}"`;
            
            container.appendChild(img);
            container.appendChild(title);
            
            container.addEventListener('click', () => {
                if (galleryState.focusedImage) {
                    galleryState.focusedImage.classList.remove('focused');
                }
                container.classList.add('focused');
                galleryState.focusedImage = container;
                playClickSound();
            });
            
            setTimeout(() => container.classList.add('loaded'), 50);
            
            return container;
        }

        function showSection(sectionType) {
            document.getElementById('mainHub').style.display = 'none';
            
            const section = document.getElementById(`${sectionType}Section`);
            section.classList.add('active');
            
            if (sectionType === 'gallery') {
                galleryState.isGalleryActive = true;
                if (galleryState.images.length === 0) {
                    initializeGallery();
                }
                if (!galleryState.animationId) {
                    updateGalleryView();
                }
            }
        }

        function closeSection() {
            document.querySelectorAll('.section-view').forEach(section => {
                section.classList.remove('active');
            });
            
            if (galleryState.isGalleryActive) {
                galleryState.isGalleryActive = false;
                if (galleryState.animationId) {
                    cancelAnimationFrame(galleryState.animationId);
                    galleryState.animationId = null;
                }
                document.querySelectorAll('.gallery-arrow').forEach(arrow => {
                    arrow.classList.remove('active');
                });
            }
            
            if (galleryState.focusedImage) {
                galleryState.focusedImage.classList.remove('focused');
                galleryState.focusedImage = null;
            }
            
            document.getElementById('mainHub').style.display = 'block';
        }

        function showAbout() {
            document.getElementById('hubHome').style.display = 'none';
            document.getElementById('aboutSection').classList.remove('hidden');
            document.getElementById('backButton').classList.remove('hidden');
        }

        function showHub() {
            document.getElementById('hubHome').style.display = 'block';
            document.getElementById('aboutSection').classList.add('hidden');
            document.getElementById('backButton').classList.add('hidden');
        }

        window.onload = function() {
            passwordInput.focus();
            initializeCarousels();
            
            passwordAudio.play().catch(error => {
                console.log('Autoplay prevented:', error);
                document.addEventListener('click', function playAudioOnce() {
                    passwordAudio.play();
                    document.removeEventListener('click', playAudioOnce);
                });
            });
        };

        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                ['games', 'vrchat', 'other'].forEach(type => {
                    if (document.getElementById(`${type}Section`).classList.contains('active')) {
                        updateCarouselPositions(type);
                    }
                });
            }, 250);
        });
    </script>
</body>
</html>